spreadplayers ~ ~ 1 3 false @e[tag=new_corrupt_block,tag=!small,tag=!large]
spreadplayers ~ ~ 1 2 false @e[tag=new_corrupt_block,tag=small]
spreadplayers ~ ~ 1 7 false @e[tag=new_corrupt_block,tag=large]
execute as @e[tag=new_corrupt_block] at @s if block ~ ~-1 ~ #main:non_solid run spreadplayers ~ ~ 0 2 false @s
execute as @e[tag=new_corrupt_block] at @s if block ~ ~-1 ~ #main:non_solid run kill @s

execute unless score @s color matches 0..15 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.purple"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:purple_carpet"}}
execute if score @s color matches 0 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.white"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:white_carpet"}}
execute if score @s color matches 1 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.orange"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:orange_carpet"}}
execute if score @s color matches 2 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.magenta"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:magenta_carpet"}}
execute if score @s color matches 3 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.light_blue"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:light_blue_carpet"}}
execute if score @s color matches 4 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.yellow"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:yellow_carpet"}}
execute if score @s color matches 5 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.lime"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:lime_carpet"}}
execute if score @s color matches 6 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.pink"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:pink_carpet"}}
execute if score @s color matches 7 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.gray"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:gray_carpet"}}
execute if score @s color matches 8 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.light_gray"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:light_gray_carpet"}}
execute if score @s color matches 9 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.cyan"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:cyan_carpet"}}
execute if score @s color matches 10 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.purple"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:purple_carpet"}}
execute if score @s color matches 11 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.blue"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:blue_carpet"}}
execute if score @s color matches 12 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.brown"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:brown_carpet"}}
execute if score @s color matches 13 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.green"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:green_carpet"}}
execute if score @s color matches 14 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.red"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:red_carpet"}}
execute if score @s color matches 15 at @e[tag=new_corrupt_block] align xyz run summon block_display ~0.5 ~ ~0.5 {Tags:["new_corrupt_block","corrupt_block","cleanup","infected","infection_color.black"],transformation:[1f,0f,0f,-0.5f,0f,0.1f,0f,0f,0f,0f,1f,-0.5f,0f,0f,0f,1f],block_state:{Name:"minecraft:black_carpet"}}
execute as @e[type=block_display,tag=new_corrupt_block] at @s if entity @n[type=marker,tag=new_corrupt_block,scores={id=1..}] run scoreboard players operation @s id = @n[type=marker,tag=new_corrupt_block,scores={id=1..}] id

execute as @e[tag=new_corrupt_block] at @s if block ~ ~-1 ~ #minecraft:slabs run tp @s ~ ~-0.5 ~
scoreboard players set @e[type=block_display,tag=new_corrupt_block] color 10
scoreboard players operation @e[type=block_display,tag=new_corrupt_block] color = @s color
tag @e[type=block_display,tag=new_corrupt_block] remove new_corrupt_block
kill @e[type=marker,tag=new_corrupt_block]
